import React from 'react';
import PropTypes from 'prop-types';
import { Seat } from './Seat';
import { model } from './stageModel';

const Stage = ({ assignedSeats, onClick }) => {
    const allSeats = model.flat();
    allSeats.forEach(seat => {
        const assigned = assignedSeats.find(a => a.id === seat.id);
        if (assigned) {
            if (assigned.isBought) {
                seat.backgroundColor = assigned.actor.color;
            }
            seat.borderColor = assigned.actor.color;
            seat.fontColor = 'black';
        } else {
            seat.borderColor = '#828282';
            seat.backgroundColor = '#F8F8F8';
            seat.fontColor = '#222';
        }
    });
    return (
        <div style={{ overflow: 'auto' }}>
            <svg width="902" height="640" viewBox="0 0 902 640" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="0.5" y="1.5" width="901" height="638" fill="url(#paint0_linear)" stroke="#333333" />
                <path d="M33 515L868.5 514.5" stroke="black" strokeWidth="3" />
                <path d="M227 1C407.824 53.8847 547.008 49.399 694 1" stroke="black" />
                {model[0].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[1].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[2].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[3].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[4].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[5].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[6].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[7].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[8].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[9].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                {model[10].map(s => <Seat key={s.id} onClick={onClick} {...s} />)}
                <defs>
                    <path id="one" d="M21.1259 25.3333H18.999V15.0589L15.8613 16.1312V14.3294L20.8535 12.4925H21.1259V25.3333Z" />
                    <path id="two" d="M23.9472 25.3333H15.3427V23.8656L19.6054 19.2161C20.2207 18.5306 20.6572 17.9593 20.915 17.5023C21.1787 17.0394 21.3105 16.5765 21.3105 16.1136C21.3105 15.5042 21.1377 15.012 20.792 14.637C20.4521 14.262 19.9921 14.0745 19.4121 14.0745C18.7207 14.0745 18.1845 14.2855 17.8037 14.7074C17.4228 15.1292 17.2324 15.7064 17.2324 16.4388H15.0966C15.0966 15.6595 15.2724 14.9593 15.624 14.3382C15.9814 13.7113 16.4882 13.2249 17.1445 12.8792C17.8066 12.5335 18.5683 12.3607 19.4296 12.3607C20.6718 12.3607 21.6503 12.6742 22.3652 13.3011C23.0859 13.9222 23.4462 14.7835 23.4462 15.8851C23.4462 16.5238 23.2646 17.1947 22.9013 17.8978C22.5439 18.5951 21.955 19.389 21.1347 20.2796L18.0058 23.6283H23.9472V25.3333Z" />
                    <path id="three" d="M17.8125 17.9593H19.1132C19.7695 17.9535 20.288 17.7835 20.6689 17.4495C21.0556 17.1156 21.249 16.6322 21.249 15.9993C21.249 15.39 21.0878 14.9183 20.7656 14.5843C20.4492 14.2445 19.9628 14.0745 19.3066 14.0745C18.7324 14.0745 18.2607 14.2415 17.8916 14.5755C17.5224 14.9036 17.3378 15.3343 17.3378 15.8675H15.2021C15.2021 15.2113 15.375 14.6136 15.7207 14.0745C16.0722 13.5355 16.5586 13.1165 17.1796 12.8177C17.8066 12.513 18.5068 12.3607 19.2802 12.3607C20.5576 12.3607 21.5595 12.6829 22.2861 13.3275C23.0185 13.9661 23.3847 14.8568 23.3847 15.9993C23.3847 16.5736 23.2002 17.1156 22.831 17.6253C22.4677 18.1292 21.9961 18.5101 21.416 18.7679C22.1191 19.0081 22.6523 19.3861 23.0156 19.9017C23.3847 20.4173 23.5693 21.0326 23.5693 21.7474C23.5693 22.8958 23.1738 23.8099 22.3828 24.4896C21.5976 25.1693 20.5634 25.5091 19.2802 25.5091C18.0498 25.5091 17.042 25.181 16.2568 24.5247C15.4716 23.8685 15.0791 22.9954 15.0791 21.9056H17.2148C17.2148 22.4681 17.4023 22.9251 17.7773 23.2767C18.1582 23.6283 18.6679 23.804 19.3066 23.804C19.9687 23.804 20.4902 23.6283 20.8711 23.2767C21.2519 22.9251 21.4423 22.4154 21.4423 21.7474C21.4423 21.0736 21.2431 20.555 20.8447 20.1917C20.4462 19.8285 19.8545 19.6468 19.0693 19.6468H17.8125V17.9593Z" />
                    <path id="four" d="M22.5673 20.7718H24.1582V22.4857H22.5673V25.3333H20.4316V22.4857H14.9033L14.8418 21.1849L20.3613 12.5365H22.5673V20.7718ZM17.083 20.7718H20.4316V15.4281L20.2734 15.7093L17.083 20.7718Z" />
                    <path id="five" d="M15.914 18.9876L16.6084 12.5365H23.4814V14.3822H18.3837L18.0322 17.4408C18.624 17.1009 19.292 16.931 20.0361 16.931C21.2548 16.931 22.2011 17.3206 22.875 18.0999C23.5546 18.8792 23.8945 19.9281 23.8945 21.2464C23.8945 22.5472 23.5195 23.5843 22.7695 24.3577C22.0195 25.1253 20.9912 25.5091 19.6845 25.5091C18.5127 25.5091 17.54 25.1781 16.7666 24.516C15.999 23.848 15.583 22.9691 15.5185 21.8792H17.5839C17.666 22.5003 17.8886 22.9779 18.2519 23.3118C18.6152 23.64 19.0898 23.804 19.6757 23.804C20.332 23.804 20.8418 23.5697 21.205 23.1009C21.5742 22.6322 21.7587 21.9935 21.7587 21.1849C21.7587 20.4056 21.5566 19.7904 21.1523 19.3392C20.748 18.8822 20.1914 18.6536 19.4824 18.6536C19.0957 18.6536 18.7675 18.7064 18.498 18.8118C18.2285 18.9115 17.9355 19.1107 17.6191 19.4095L15.914 18.9876Z" />
                    <path id="six" d="M21.9873 12.4749V14.2415H21.7236C20.5283 14.2591 19.5732 14.5872 18.8584 15.2259C18.1435 15.8646 17.7187 16.7699 17.5839 17.9417C18.2695 17.221 19.1455 16.8607 20.2119 16.8607C21.3427 16.8607 22.2334 17.2591 22.8837 18.056C23.54 18.8529 23.8681 19.8812 23.8681 21.141C23.8681 22.4417 23.4843 23.4964 22.7168 24.305C21.955 25.1077 20.9531 25.5091 19.7109 25.5091C18.4336 25.5091 17.3964 25.0374 16.5996 24.0941C15.8086 23.1507 15.413 21.9144 15.413 20.3851V19.6556C15.413 17.4115 15.958 15.6536 17.0478 14.3822C18.1435 13.1107 19.7168 12.4749 21.7675 12.4749H21.9873ZM19.6933 18.5833C19.2246 18.5833 18.7939 18.7152 18.4013 18.9788C18.0146 19.2425 17.7304 19.5941 17.5488 20.0335V20.6839C17.5488 21.6331 17.748 22.389 18.1464 22.9515C18.5449 23.5081 19.0605 23.7865 19.6933 23.7865C20.3261 23.7865 20.8271 23.5492 21.1962 23.0745C21.5654 22.5999 21.75 21.9759 21.75 21.2025C21.75 20.429 21.5625 19.7992 21.1875 19.3128C20.8125 18.8265 20.3144 18.5833 19.6933 18.5833Z" />
                    <path id="seven" d="M23.8593 13.723L18.7441 25.3333H16.5029L21.6093 14.2503H14.9912V12.5365H23.8593V13.723Z" />
                    <path id="eight" d="M23.4023 15.9115C23.4023 16.5384 23.2412 17.098 22.9189 17.5902C22.5966 18.0765 22.1572 18.4603 21.6005 18.7415C22.2685 19.0521 22.7812 19.4769 23.1386 20.016C23.5019 20.555 23.6836 21.1644 23.6836 21.8441C23.6836 22.9691 23.3027 23.8626 22.541 24.5247C21.7793 25.181 20.7656 25.5091 19.5 25.5091C18.2285 25.5091 17.2089 25.1781 16.4414 24.516C15.6796 23.8538 15.2988 22.9632 15.2988 21.8441C15.2988 21.1585 15.4804 20.5433 15.8437 19.9984C16.207 19.4535 16.7168 19.0345 17.373 18.7415C16.8222 18.4603 16.3857 18.0765 16.0634 17.5902C15.747 17.098 15.5888 16.5384 15.5888 15.9115C15.5888 14.8216 15.9404 13.9574 16.6435 13.3187C17.3466 12.68 18.2959 12.3607 19.4912 12.3607C20.6923 12.3607 21.6445 12.68 22.3476 13.3187C23.0507 13.9574 23.4023 14.8216 23.4023 15.9115ZM21.5478 21.7386C21.5478 21.1058 21.3574 20.596 20.9765 20.2093C20.6015 19.8167 20.1035 19.6204 19.4824 19.6204C18.8613 19.6204 18.3632 19.8138 17.9882 20.2005C17.6191 20.5872 17.4345 21.0999 17.4345 21.7386C17.4345 22.3656 17.6162 22.8665 17.9795 23.2415C18.3486 23.6165 18.8554 23.804 19.5 23.804C20.1445 23.804 20.6455 23.6224 21.0029 23.2591C21.3662 22.8958 21.5478 22.389 21.5478 21.7386ZM21.2753 15.9906C21.2753 15.4339 21.1142 14.9769 20.792 14.6195C20.4697 14.2562 20.0361 14.0745 19.4912 14.0745C18.9462 14.0745 18.5156 14.2474 18.1992 14.5931C17.8828 14.9329 17.7246 15.3988 17.7246 15.9906C17.7246 16.5765 17.8828 17.0423 18.1992 17.388C18.5214 17.7337 18.955 17.9066 19.5 17.9066C20.0449 17.9066 20.4755 17.7337 20.792 17.388C21.1142 17.0423 21.2753 16.5765 21.2753 15.9906Z" />
                    <path id="nine" d="M21.3984 19.9808C20.6836 20.7367 19.8486 21.1146 18.8935 21.1146C17.7685 21.1146 16.872 20.722 16.2041 19.9368C15.5361 19.1458 15.2021 18.1087 15.2021 16.8255C15.2021 15.9818 15.372 15.2171 15.7119 14.5316C16.0517 13.846 16.5351 13.3128 17.1621 12.932C17.789 12.5511 18.5156 12.3607 19.3418 12.3607C20.6308 12.3607 21.6533 12.8411 22.4091 13.8021C23.165 14.763 23.5429 16.0492 23.5429 17.6605V18.2581C23.5429 20.5667 23.0214 22.3275 21.9785 23.5404C20.9355 24.7533 19.3798 25.3685 17.3115 25.3861H17.0566V23.6195H17.3642C18.624 23.6019 19.5908 23.3001 20.2646 22.7142C20.9384 22.1224 21.3164 21.2113 21.3984 19.9808ZM19.3418 19.4447C19.7695 19.4447 20.1709 19.3216 20.5459 19.0755C20.9209 18.8294 21.2109 18.4896 21.416 18.056V17.221C21.416 16.2777 21.2226 15.5189 20.8359 14.9447C20.4492 14.3704 19.9482 14.0833 19.333 14.0833C18.7177 14.0833 18.2255 14.3382 17.8564 14.848C17.4931 15.3519 17.3115 15.9906 17.3115 16.764C17.3115 17.5667 17.4961 18.2142 17.8652 18.7064C18.2343 19.1986 18.7265 19.4447 19.3418 19.4447Z" />
                    <path id="ten" d="M16.1107 25.3333H13.9837V15.0589L10.8461 16.1312V14.3294L15.8382 12.4925H16.1107V25.3333ZM28.6988 19.9456C28.6988 21.7855 28.3531 23.1742 27.6617 24.1117C26.9761 25.0433 25.9302 25.5091 24.524 25.5091C23.1412 25.5091 22.0982 25.055 21.3951 24.1468C20.6978 23.2327 20.3404 21.8822 20.3228 20.0951V17.8802C20.3228 16.0404 20.6656 14.6605 21.3511 13.7406C22.0425 12.8206 23.0943 12.3607 24.5064 12.3607C25.9068 12.3607 26.9498 12.8089 27.6353 13.7054C28.3267 14.6019 28.6812 15.9437 28.6988 17.7308V19.9456ZM26.563 17.555C26.563 16.3538 26.399 15.4749 26.0709 14.9183C25.7427 14.3558 25.2212 14.0745 24.5064 14.0745C23.8091 14.0745 23.2964 14.3411 22.9683 14.8743C22.6402 15.4017 22.4673 16.2279 22.4498 17.3529V20.2533C22.4498 21.4486 22.6168 22.3392 22.9507 22.9251C23.2847 23.5111 23.8091 23.804 24.524 23.804C25.2095 23.804 25.7164 23.5345 26.0445 22.9954C26.3726 22.4505 26.5455 21.6009 26.563 20.4466V17.555Z" />
                    <path id="eleven" d="M16.1107 25.3333H13.9837V15.0589L10.8461 16.1312V14.3294L15.8382 12.4925H16.1107V25.3333ZM26.1412 25.3333H24.0142V15.0589L20.8765 16.1312V14.3294L25.8687 12.4925H26.1412V25.3333Z" />
                    <path id="twelve" d="M16.1107 25.3333H13.9837V15.0589L10.8461 16.1312V14.3294L15.8382 12.4925H16.1107V25.3333ZM28.9625 25.3333H20.358V23.8656L24.6207 19.2161C25.2359 18.5306 25.6724 17.9593 25.9302 17.5023C26.1939 17.0394 26.3257 16.5765 26.3257 16.1136C26.3257 15.5042 26.1529 15.012 25.8072 14.637C25.4673 14.262 25.0074 14.0745 24.4273 14.0745C23.7359 14.0745 23.1998 14.2855 22.8189 14.7074C22.438 15.1292 22.2476 15.7064 22.2476 16.4388H20.1119C20.1119 15.6595 20.2877 14.9593 20.6392 14.3382C20.9966 13.7113 21.5035 13.2249 22.1597 12.8792C22.8218 12.5335 23.5836 12.3607 24.4449 12.3607C25.6871 12.3607 26.6656 12.6742 27.3804 13.3011C28.1011 13.9222 28.4615 14.7835 28.4615 15.8851C28.4615 16.5238 28.2798 17.1947 27.9166 17.8978C27.5591 18.5951 26.9703 19.389 26.15 20.2796L23.0211 23.6283H28.9625V25.3333Z" />
                    <path id="thirteen" d="M16.1107 25.3333H13.9837V15.0589L10.8461 16.1312V14.3294L15.8382 12.4925H16.1107V25.3333ZM22.8277 17.9593H24.1285C24.7847 17.9535 25.3033 17.7835 25.6841 17.4495C26.0709 17.1156 26.2642 16.6322 26.2642 15.9993C26.2642 15.39 26.1031 14.9183 25.7808 14.5843C25.4644 14.2445 24.9781 14.0745 24.3218 14.0745C23.7476 14.0745 23.2759 14.2415 22.9068 14.5755C22.5377 14.9036 22.3531 15.3343 22.3531 15.8675H20.2173C20.2173 15.2113 20.3902 14.6136 20.7359 14.0745C21.0875 13.5355 21.5738 13.1165 22.1949 12.8177C22.8218 12.513 23.522 12.3607 24.2955 12.3607C25.5728 12.3607 26.5748 12.6829 27.3013 13.3275C28.0337 13.9661 28.4 14.8568 28.4 15.9993C28.4 16.5736 28.2154 17.1156 27.8462 17.6253C27.483 18.1292 27.0113 18.5101 26.4312 18.7679C27.1343 19.0081 27.6675 19.3861 28.0308 19.9017C28.4 20.4173 28.5845 21.0326 28.5845 21.7474C28.5845 22.8958 28.189 23.8099 27.398 24.4896C26.6129 25.1693 25.5787 25.5091 24.2955 25.5091C23.065 25.5091 22.0572 25.181 21.272 24.5247C20.4869 23.8685 20.0943 22.9954 20.0943 21.9056H22.23C22.23 22.4681 22.4175 22.9251 22.7925 23.2767C23.1734 23.6283 23.6832 23.804 24.3218 23.804C24.9839 23.804 25.5054 23.6283 25.8863 23.2767C26.2671 22.9251 26.4576 22.4154 26.4576 21.7474C26.4576 21.0736 26.2584 20.555 25.8599 20.1917C25.4615 19.8285 24.8697 19.6468 24.0845 19.6468H22.8277V17.9593Z" />
                    <path id="fourteen" d="M16.1107 25.3333H13.9837V15.0589L10.8461 16.1312V14.3294L15.8382 12.4925H16.1107V25.3333ZM27.5826 20.7718H29.1734V22.4857H27.5826V25.3333H25.4468V22.4857H19.9185L19.857 21.1849L25.3765 12.5365H27.5826V20.7718ZM22.0982 20.7718H25.4468V15.4281L25.2886 15.7093L22.0982 20.7718Z" />
                    <path id="fifteen" d="M16.1107 25.3333H13.9837V15.0589L10.8461 16.1312V14.3294L15.8382 12.4925H16.1107V25.3333ZM20.9293 18.9876L21.6236 12.5365H28.4966V14.3822H23.399L23.0474 17.4408C23.6392 17.1009 24.3072 16.931 25.0513 16.931C26.2701 16.931 27.2164 17.3206 27.8902 18.0999C28.5699 18.8792 28.9097 19.9281 28.9097 21.2464C28.9097 22.5472 28.5347 23.5843 27.7847 24.3577C27.0347 25.1253 26.0064 25.5091 24.6998 25.5091C23.5279 25.5091 22.5552 25.1781 21.7818 24.516C21.0142 23.848 20.5982 22.9691 20.5337 21.8792H22.5992C22.6812 22.5003 22.9039 22.9779 23.2671 23.3118C23.6304 23.64 24.105 23.804 24.691 23.804C25.3472 23.804 25.857 23.5697 26.2203 23.1009C26.5894 22.6322 26.774 21.9935 26.774 21.1849C26.774 20.4056 26.5718 19.7904 26.1675 19.3392C25.7632 18.8822 25.2066 18.6536 24.4976 18.6536C24.1109 18.6536 23.7828 18.7064 23.5132 18.8118C23.2437 18.9115 22.9507 19.1107 22.6343 19.4095L20.9293 18.9876Z" />
                    <path id="sixteen" d="M16.1107 25.3333H13.9837V15.0589L10.8461 16.1312V14.3294L15.8382 12.4925H16.1107V25.3333ZM27.0025 12.4749V14.2415H26.7388C25.5435 14.2591 24.5884 14.5872 23.8736 15.2259C23.1587 15.8646 22.7339 16.7699 22.5992 17.9417C23.2847 17.221 24.1607 16.8607 25.2271 16.8607C26.358 16.8607 27.2486 17.2591 27.899 18.056C28.5552 18.8529 28.8834 19.8812 28.8834 21.141C28.8834 22.4417 28.4996 23.4964 27.732 24.305C26.9703 25.1077 25.9683 25.5091 24.7261 25.5091C23.4488 25.5091 22.4117 25.0374 21.6148 24.0941C20.8238 23.1507 20.4283 21.9144 20.4283 20.3851V19.6556C20.4283 17.4115 20.9732 15.6536 22.063 14.3822C23.1587 13.1107 24.732 12.4749 26.7828 12.4749H27.0025ZM24.7086 18.5833C24.2398 18.5833 23.8091 18.7152 23.4166 18.9788C23.0298 19.2425 22.7457 19.5941 22.564 20.0335V20.6839C22.564 21.6331 22.7632 22.389 23.1617 22.9515C23.5601 23.5081 24.0757 23.7865 24.7086 23.7865C25.3414 23.7865 25.8423 23.5492 26.2115 23.0745C26.5806 22.5999 26.7652 21.9759 26.7652 21.2025C26.7652 20.429 26.5777 19.7992 26.2027 19.3128C25.8277 18.8265 25.3296 18.5833 24.7086 18.5833Z" />
                    <linearGradient id="paint0_linear" x1="451" y1="1" x2="451" y2="640" gradientUnits="userSpaceOnUse">
                        <stop stopColor="#EDEDED" />
                        <stop offset="1" stopColor="#1C1C1C" />
                    </linearGradient>
                </defs>
            </svg>
        </div>
    )
}

Stage.propTypes = {
    onClick: PropTypes.func.isRequired,
    assignedSeats: PropTypes.array
}

Stage.defaultProps = {
    assignedSeats: []
};

export { Stage };
